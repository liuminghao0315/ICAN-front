# 【全模态智能事件流】测试检查清单

## 🔍 测试环境
- 开发服务器：`http://localhost:5173`
- 测试页面：`/analysis`
- 测试视频：北大学生吐槽选课系统（50秒）

---

## ✅ 功能测试清单

### 1. 数据加载验证
- [ ] 页面打开无报错
- [ ] 右侧事件流列表成功渲染
- [ ] 事件卡片按时间顺序排列
- [ ] 总事件数应为 **17个**（包含Speech/Visual/AudioEffect）

### 2. 模态筛选器测试
- [ ] 点击"全模态"：显示所有17个事件
- [ ] 点击"风险优先"：只显示中高风险事件（约12个）
- [ ] 点击"纯字幕"：只显示语音事件（约6个）
- [ ] 筛选器按钮激活状态正确高亮

### 3. 卡片渲染验证

#### Speech 卡片特征
- [ ] 左侧麦克风图标（🎤）
- [ ] 显示台词内容
- [ ] 显示情绪标签（平静/愤怒/紧张/严肃）
- [ ] 敏感关键词高亮（红色背景）

#### Visual 卡片特征
- [ ] 左侧眼睛图标（👁️）
- [ ] 显示检测结论（如：检测到校徽、OCR敏感词）
- [ ] 显示置信度芯片
- [ ] 有检测框的显示"检测框已标注"芯片

#### AudioEffect 卡片特征
- [ ] 左侧耳机图标（🎧）
- [ ] 显示声音描述（如：拍桌、咆哮）
- [ ] 显示强度进度条

### 4. 风险色编码验证
- [ ] 高风险卡片：左侧红色边框（#f56c6c）+ 浅红背景
- [ ] 中风险卡片：左侧橙色边框（#faad14）+ 浅橙背景
- [ ] 低风险卡片：左侧绿色边框（#52c41a）

### 5. 哑剧漏洞验证（关键测试）

#### 测试场景A：24-28秒横幅时段
1. [ ] 拖动视频进度到 24秒
2. [ ] 右侧列表高亮 **Visual卡片**（检测到横幅标语）
3. [ ] 画面上显示 **检测框**（大范围横幅区域）
4. [ ] 确认此时段**无语音卡片**（纯视觉风险）

#### 测试场景B：42-44秒选课系统画面
1. [ ] 拖动视频进度到 42秒
2. [ ] 右侧列表高亮 **Visual卡片**（OCR识别选课系统）
3. [ ] 画面上显示 **检测框**（屏幕区域）
4. [ ] 确认此时段**无语音卡片**

#### 测试场景C：20-22秒愤怒表情
1. [ ] 拖动视频进度到 20秒
2. [ ] 右侧列表同时高亮 **Speech卡片（15-22秒）** 和 **Visual卡片（20-22秒，愤怒表情）**
3. [ ] 画面上显示 **人脸检测框**
4. [ ] 确认事件重叠时两张卡片都激活

### 6. 事件驱动交互验证

#### 视频播放 → 列表高亮
1. [ ] 点击播放，视频从头开始
2. [ ] 0-5秒：Visual卡片高亮（校徽）
3. [ ] 5-10秒：Speech卡片高亮（平静介绍）
4. [ ] 10-12秒：AudioEffect卡片高亮（拍桌）
5. [ ] 15-22秒：Speech卡片高亮（煽动台词）
6. [ ] 高亮状态：白色背景 + 紫色外发光

#### 列表点击 → 视频跳转 + 检测框显示
1. [ ] 点击"检测到校徽"卡片 → 视频跳转到 0秒 + 画面显示校徽检测框
2. [ ] 点击"OCR敏感词：抵制"卡片 → 跳转到 16秒 + 画面显示文字检测框
3. [ ] 点击"过激手势"卡片 → 跳转到 30秒 + 画面显示手势检测框
4. [ ] 点击"拍桌"AudioEffect卡片 → 跳转到 10秒（无检测框，纯声学）

### 7. 检测框联动验证（核心）
1. [ ] 拖动视频到 16秒
2. [ ] 画面上出现 **OCR检测框**（敏感词区域）
3. [ ] 右侧列表高亮对应的 **Visual卡片**
4. [ ] 关闭"显示检测框"开关 → 检测框消失
5. [ ] 打开"显示检测框"开关 → 检测框重新出现
6. [ ] 确认检测框颜色与卡片风险等级一致（高风险=红色框）

### 8. 性能测试
- [ ] 快速拖动进度条，列表实时响应无卡顿
- [ ] 频繁切换筛选器，渲染流畅
- [ ] 事件卡片hover效果顺滑（平移+阴影）
- [ ] 控制台无报错/警告

---

## 🐛 已知问题排查

### 如果事件列表为空
**原因**：`timelineEvents` 数据未加载  
**解决**：检查 `mockAnalysisResult.timelineEvents` 是否有 17个事件

### 如果检测框不显示
**原因**：Visual事件缺少 `boundingBox` 字段  
**解决**：检查 Mock 数据中的 Visual 事件是否都有坐标

### 如果筛选器无效
**原因**：`filteredTimelineEvents` 计算属性逻辑错误  
**解决**：检查 `modalityFilter` 响应式变量

### 如果卡片样式错乱
**原因**：SCSS 编译问题  
**解决**：检查 `.timeline-event-card` 样式是否生效

---

## 📊 预期结果统计

| 模态类型 | 事件数量 | 高风险数量 | 中风险数量 | 低风险数量 |
|----------|----------|------------|------------|------------|
| Speech | 6 | 1 | 2 | 3 |
| Visual | 8 | 4 | 3 | 1 |
| AudioEffect | 2 | 1 | 1 | 0 |
| **总计** | **17** | **6** | **6** | **4** |

---

## ✅ 验收标准

重构成功的标志：
1. ✅ **哑剧时段有卡片**：24-28秒、42-44秒、20-22秒必须有 Visual 卡片
2. ✅ **检测框完全驱动**：画面上的框必须来自右侧激活的卡片
3. ✅ **模态图标清晰**：一眼区分麦克风/眼睛/耳机
4. ✅ **风险色编码明确**：左侧边框颜色 = 风险等级
5. ✅ **筛选器生效**：三个按钮正确过滤事件

---

## 🚀 测试命令

```bash
# 如需重启开发服务器
cnpm run dev

# 访问测试页面
http://localhost:5173/analysis
```

---

**测试完成后，请在此文件顶部标注测试结果：✅ PASS / ❌ FAIL**
